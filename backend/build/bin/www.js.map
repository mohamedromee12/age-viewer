{"version":3,"file":"www.js","names":["app","require","debug","http","port","normalizePort","process","env","PORT","set","server","createServer","listen","on","onError","onListening","val","parseInt","isNaN","error","syscall","bind","code","console","exit","addr","address"],"sources":["../../src/bin/www.js"],"sourcesContent":["#!/usr/bin/env node\n\n/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n/**\n * Module dependencies.\n */\nconst app = require('../app');\nconst debug = require('debug')('ag-viewer:server');\nconst http = require('http');\n\n/**\n * Get port from environment and store in Express.\n */\nconst port = normalizePort(process.env.PORT || '3001');\napp.set('port', port);\n\n/**\n * Create HTTP server.\n */\nconst server = http.createServer(app);\n\n/**\n * Listen on provided port, on all network interfaces.\n */\n\nserver.listen(port);\nserver.on('error', onError);\nserver.on('listening', onListening);\n\n/**\n * Normalize a port into a number, string, or false.\n */\n\nfunction normalizePort(val) {\n  const port = parseInt(val, 10);\n\n  if (isNaN(port)) {\n    // named pipe\n    return val;\n  }\n\n  if (port >= 0) {\n    // port number\n    return port;\n  }\n\n  return false;\n}\n\n/**\n * Event listener for HTTP server \"error\" event.\n */\n\nfunction onError(error) {\n  if (error.syscall !== 'listen') {\n    throw error;\n  }\n\n  const bind = typeof port === 'string'\n      ? 'Pipe ' + port\n      : 'Port ' + port;\n\n  // handle specific listen errors with friendly messages\n  switch (error.code) {\n    case 'EACCES':\n      console.error(bind + ' requires elevated privileges');\n      process.exit(1);\n      break;\n    case 'EADDRINUSE':\n      console.error(bind + ' is already in use');\n      process.exit(1);\n      break;\n    default:\n      throw error;\n  }\n}\n\n/**\n * Event listener for HTTP server \"listening\" event.\n */\n\nfunction onListening() {\n  const addr = server.address();\n  const bind = typeof addr === 'string'\n      ? 'pipe ' + addr\n      : 'port ' + addr.port;\n  debug('Listening on ' + bind);\n}\n"],"mappings":"AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AAFA;;AAGA,IAAMA,GAAG,GAAGC,OAAO,CAAC,QAAQ,CAAC;AAC7B,IAAMC,KAAK,GAAGD,OAAO,CAAC,OAAO,CAAC,CAAC,kBAAkB,CAAC;AAClD,IAAME,IAAI,GAAGF,OAAO,CAAC,MAAM,CAAC;;AAE5B;AACA;AACA;AACA,IAAMG,IAAI,GAAGC,aAAa,CAACC,OAAO,CAACC,GAAG,CAACC,IAAI,IAAI,MAAM,CAAC;AACtDR,GAAG,CAACS,GAAG,CAAC,MAAM,EAAEL,IAAI,CAAC;;AAErB;AACA;AACA;AACA,IAAMM,MAAM,GAAGP,IAAI,CAACQ,YAAY,CAACX,GAAG,CAAC;;AAErC;AACA;AACA;;AAEAU,MAAM,CAACE,MAAM,CAACR,IAAI,CAAC;AACnBM,MAAM,CAACG,EAAE,CAAC,OAAO,EAAEC,OAAO,CAAC;AAC3BJ,MAAM,CAACG,EAAE,CAAC,WAAW,EAAEE,WAAW,CAAC;;AAEnC;AACA;AACA;;AAEA,SAASV,aAAaA,CAACW,GAAG,EAAE;EAC1B,IAAMZ,IAAI,GAAGa,QAAQ,CAACD,GAAG,EAAE,EAAE,CAAC;EAE9B,IAAIE,KAAK,CAACd,IAAI,CAAC,EAAE;IACf;IACA,OAAOY,GAAG;EACZ;EAEA,IAAIZ,IAAI,IAAI,CAAC,EAAE;IACb;IACA,OAAOA,IAAI;EACb;EAEA,OAAO,KAAK;AACd;;AAEA;AACA;AACA;;AAEA,SAASU,OAAOA,CAACK,KAAK,EAAE;EACtB,IAAIA,KAAK,CAACC,OAAO,KAAK,QAAQ,EAAE;IAC9B,MAAMD,KAAK;EACb;EAEA,IAAME,IAAI,GAAG,OAAOjB,IAAI,KAAK,QAAQ,GAC/B,OAAO,GAAGA,IAAI,GACd,OAAO,GAAGA,IAAI;;EAEpB;EACA,QAAQe,KAAK,CAACG,IAAI;IAChB,KAAK,QAAQ;MACXC,OAAO,CAACJ,KAAK,CAACE,IAAI,GAAG,+BAA+B,CAAC;MACrDf,OAAO,CAACkB,IAAI,CAAC,CAAC,CAAC;MACf;IACF,KAAK,YAAY;MACfD,OAAO,CAACJ,KAAK,CAACE,IAAI,GAAG,oBAAoB,CAAC;MAC1Cf,OAAO,CAACkB,IAAI,CAAC,CAAC,CAAC;MACf;IACF;MACE,MAAML,KAAK;EACf;AACF;;AAEA;AACA;AACA;;AAEA,SAASJ,WAAWA,CAAA,EAAG;EACrB,IAAMU,IAAI,GAAGf,MAAM,CAACgB,OAAO,CAAC,CAAC;EAC7B,IAAML,IAAI,GAAG,OAAOI,IAAI,KAAK,QAAQ,GAC/B,OAAO,GAAGA,IAAI,GACd,OAAO,GAAGA,IAAI,CAACrB,IAAI;EACzBF,KAAK,CAAC,eAAe,GAAGmB,IAAI,CAAC;AAC/B"}