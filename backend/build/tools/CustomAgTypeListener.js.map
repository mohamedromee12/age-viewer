{"version":3,"file":"CustomAgTypeListener.js","names":["_AgtypeListener2","_interopRequireDefault","require","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf2","result","NewTarget","constructor","Reflect","construct","arguments","apply","_possibleConstructorReturn2","sham","Proxy","Boolean","prototype","valueOf","call","e","CustomAgTypeListener","_AgtypeListener","_inherits2","_super","_this","_classCallCheck2","_len","length","args","Array","_key","concat","_defineProperty2","_assertThisInitialized2","_createClass2","key","value","mergeArrayOrObject","prevObject","mergeArray","mergeObject","push","lastObject","objectInsider","shift","createNewObject","newObject","unshift","createNewArray","pushIfArray","exitStringValue","ctx","stripQuotes","getText","lastValue","exitIntegerValue","parseInt","exitFloatValue","parseFloat","exitTrueBoolean","exitFalseBoolean","exitNullValue","exitFloatLiteral","enterObjectValue","enterArrayValue","exitObjectValue","exitPair","name","STRING","undefined","exitAgType","rootObject","quotesString","JSON","parse","getResult","AgtypeListener","_default","exports"],"sources":["../../src/tools/CustomAgTypeListener.js"],"sourcesContent":["/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport AgtypeListener from \"./AgtypeListener\";\n\nclass CustomAgTypeListener extends AgtypeListener {\n    rootObject = null;\n    objectInsider = [];\n    prevObject = null;\n    lastObject = null;\n    lastValue = null;\n\n    mergeArrayOrObject(key) {\n        if(this.prevObject instanceof Array){\n            this.mergeArray();\n        }else{\n            this.mergeObject(key);\n        }\n    }\n\n    mergeArray() {\n        this.prevObject.push(this.lastObject);\n        this.lastObject = this.prevObject;\n        this.objectInsider.shift();\n        this.prevObject = this.objectInsider[1];\n    }\n\n    mergeObject(key) {\n        this.prevObject[key] = this.lastObject;\n        this.lastObject = this.prevObject;\n        this.objectInsider.shift();\n        this.prevObject = this.objectInsider[1];\n    }\n\n    createNewObject(){\n        const newObject = {};\n        this.objectInsider.unshift(newObject);\n        this.prevObject = this.lastObject;\n        this.lastObject = newObject;\n    }\n\n    createNewArray(){\n        const newObject = [];\n        this.objectInsider.unshift(newObject);\n        this.prevObject = this.lastObject;\n        this.lastObject = newObject;\n    }\n\n    pushIfArray(value) {\n        if(this.lastObject instanceof Array){\n            this.lastObject.push(value);\n            return true;\n        }\n        return false;\n    }\n\n    exitStringValue(ctx) {\n        const value = this.stripQuotes(ctx.getText());\n        if(!this.pushIfArray(value)){\n            this.lastValue = value;\n        }\n    }\n\n    exitIntegerValue(ctx) {\n        const value = parseInt(ctx.getText());\n        if(!this.pushIfArray(value)){\n            this.lastValue = value;\n        }\n    }\n\n    exitFloatValue(ctx) {\n        const value = parseFloat(ctx.getText());\n        if(!this.pushIfArray(value)){\n            this.lastValue = value;\n        }\n    }\n\n    exitTrueBoolean(ctx) {\n        const value = true;\n        if(!this.pushIfArray(value)){\n            this.lastValue = value;\n        }\n    }\n\n    exitFalseBoolean(ctx) {\n        const value = false;\n        if(!this.pushIfArray(value)){\n            this.lastValue = value;\n        }\n    }\n\n    exitNullValue(ctx) {\n        const value = null;\n        if(!this.pushIfArray(value)){\n            this.lastValue = value;\n        }\n    }\n\n\n    exitFloatLiteral(ctx) {\n        const value = ctx.getText();\n        if(!this.pushIfArray(value)){\n            this.lastValue = value;\n        }\n    }\n\n\n    enterObjectValue(ctx) {\n        this.createNewObject();\n    }\n\n    enterArrayValue(ctx) {\n        this.createNewArray();\n    }\n\n    exitObjectValue(ctx) {\n        if(this.prevObject instanceof Array){\n            this.mergeArray();\n        }\n    }\n\n    exitPair(ctx) {\n        const name = this.stripQuotes(ctx.STRING().getText());\n\n        if (this.lastValue !== undefined) {\n            this.lastObject[name] = this.lastValue;\n            this.lastValue = undefined;\n        } else {\n            this.mergeArrayOrObject(name);\n        }\n    }\n\n    exitAgType(ctx) {\n        this.rootObject = this.objectInsider.shift();\n    }\n\n    stripQuotes(quotesString) {\n        return JSON.parse(quotesString);\n    }\n\n    getResult() {\n        return this.rootObject || this.lastValue;\n    }\n}\n\nexport default CustomAgTypeListener;\n"],"mappings":"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"}